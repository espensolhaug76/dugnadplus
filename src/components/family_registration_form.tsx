```jsx
import React, { useState } from 'react';
import { View, Button, TextInput, StyleSheet } from 'react-native';

interface Parent {
  name: string;
  email: string;
}

interface Child {
  name: string;
  age: number;
}

const FamilyRegistrationForm: React.FC = () => {
  const [parent, setParent] = useState<Parent>({ name: '', email: '' });
  const [children, setChildren] = useState<Child[]>([]);

  const addChild = () => {
    setChildren([...children, { name: '', age: 0 }]);
  };

  const updateChild = (index: number, field: string, value: string | number) => {
    const newChildren = [...children];
    newChildren[index][field] = value;
    setChildren(newChildren);
  };

  return (
    <View style={styles.container}>
      <TextInput
        style={styles.input}
        placeholder="Foreldre Navn"
        onChangeText={text => setParent({ ...parent, name: text })}
      />
      <TextInput
        style={styles.input}
        placeholder="Foreldre Email"
        onChangeText={text => setParent({ ...parent, email: text })}
      />

      {children.map((child, index) => (
        <View key={index}>
          <TextInput
            style={styles.input}
            placeholder="Barn Navn"
            onChangeText={text => updateChild(index, 'name', text)}
          />
          <TextInput
            style={styles.input}
            placeholder="Barn Alder"
            onChangeText={text => updateChild(index, 'age', Number(text))}
          />
        </View>
      ))}

      <Button title="Legg til barn" onPress={addChild} />
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 20,
  },
  input: {
    height: 40,
    borderColor: 'gray',
    borderWidth: 1,
    marginBottom: 10,
  },
});

export default FamilyRegistrationForm;
```